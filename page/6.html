<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
            <title>
               6.缩放玩法3
            </title>
            <link href="css/normalize.css" rel="stylesheet" type="text/css"/>
        <style type="text/css">
            html,body{
                    height:100%; 
                    margin:0;
                    background: pink;
                    overflow: hidden;
                }
                .a{
                    /*display: flex;
                    align-items: flex-end;*/
                    height: 100%;
                    width: 84%;
                    background: cyan;
                    overflow: auto;
                    position: absolute;
                }
                .b1{
                    position: absolute;
                    /*background: yellow;*/
                    height: 600px;
                    width: 900px;
                    bottom: 100px;
                    left: 5%;
                    border:2px solid white;
                    z-index: 1; 
                    overflow: hidden;
                }
                .b2{
                    position: absolute;
                    border:2px solid white;
                    bottom: 100px;
                    left: 5%;
                    height: 600px;
                    width: 900px;
                    background: url("img/11.jpg")  center center no-repeat;
                    z-index: 0;
                    visibility: hidden;

                }
                .b3{
                    position: absolute;
                    border:2px solid white;
                    bottom: 100px;
                    right: 100px;
                    height: 100px;
                    width: 100px;
                    background: url("img/11.jpg")  center center no-repeat;
                    
                }
                .b4{
                    position: absolute;
                    border:2px solid white;
                    top: 50px;
                    right: 100px;
                    height: 200px;
                    width: 400px;
                    background:grey;
                    /*overflow: hidden;*/
                    
                }
                .d{
                    left: 100px;
                    top: 50px;
                    position: absolute;
                    height: 100px;
                    width: 100px;
                    background:brown;
                    transition: 500ms ease;
                    transform-origin: 50% 50%;
                }
                .c{ 
                    position: absolute;
                    background: green;
                    transition: 500ms ease-in-out;
                    border:2px solid #999999;
                }
                @keyframes opacityA
                    {
                    0% {opacity: 1}
                    10% {opacity: 0.9}
                    20% {opacity: 0.8}
                    30% {opacity: 0.7}
                    40% {opacity: 0.6}
                    50% {opacity: 0.5}
                    60% {opacity: 0.4}
                    70% {opacity: 0.3}
                    80% {opacity: 0.2}
                    90% {opacity: 0.1}
                    100% {opacity: 0;visibility: hidden;}
                    }
                @keyframes opacityB
                    {
                    0% {opacity: 0;visibility: visible;}
                    10% {opacity: 0.1}
                    20% {opacity: 0.2}
                    30% {opacity: 0.3}
                    40% {opacity: 0.4}
                    50% {opacity: 0.5}
                    60% {opacity: 0.6}
                    70% {opacity: 0.7}
                    80% {opacity: 0.8}
                    90% {opacity: 0.9}
                    100% {opacity: 1}
                    }


                .b1x{
                    animation: opacityA 500ms forwards;

                }    
                .b2x{
                    animation: opacityB 500ms forwards;

                }    

        </style>
        </meta>
    </head>
    <body>
        <div class="a">
            <div class="b1">
                <div class="c" positionc="1" positionr="1">
                </div>
                <div class="c" positionc="1" positionr="2">
                </div>
                <div class="c" positionc="1" positionr="3">
                </div>
                <div class="c" positionc="1" positionr="4">
                </div>
                <div class="c" positionc="2" positionr="1">
                </div>
                <div class="c" positionc="2" positionr="2">
                </div>
                <div class="c" positionc="2" positionr="3">
                </div>
                <div class="c" positionc="2" positionr="4">
                </div>
                <div class="c" positionc="3" positionr="1">
                </div>
                <div class="c" positionc="3" positionr="2">
                </div>
                <div class="c" positionc="3" positionr="3">
                </div>
                <div class="c" positionc="3" positionr="4">
                </div>
            </div>
            <div class="b2 ">
            </div>
            <div class="b3 ">
            </div>
            <div class="b4 ">
                <div class="d" >
                </div>
            </div>
        </div>
        <script src="js/jquery-2.1.1.min.js">
        </script>
        <script type="text/javascript">
            $(function(){
                
                
                function creatGrid2(c,r,nc,nr,h,w,mc,mr){
                    for(var i=1;i<nc+1;i++){
                        for(var j=1;j<nr+1;j++){
                            var zc=(i-1)*(h+mc)+(c-i)*(mc+h);
                            var zr=(j-1)*(w+mr)+(r-j)*(mr+w);
                            $(".c[positionc='"+i+"'][positionr='"+j+"']").css({
                                "transform":"translate3d("+zr+"px, "+zc+"px, "+0+"px)" ,
                                "z-index":((i-1)*nr+j+1),
                                "visibility":"hidden"
                            });
                            if(c==i&&r==j){
                                $(".c[positionc='"+i+"'][positionr='"+j+"']").css({
                                    "width":w+"px",
                                    "height":h+"px",
                                    "z-index":(nc*nr+2),
                                    "visibility":"visible",
                                    "transform":"translate3d("+0+"px, "+0+"px, "+0+"px)",
                                });
                            }
                        }
                    }
                    setTimeout(function () {
                            $(".c[positionc='"+c+"'][positionr='"+r+"']").css({
                                "width":100+"%",
                                "height":100+"%"
                            });
                    },125);
                    setTimeout(function () {
                            $(".c[positionc='"+c+"'][positionr='"+r+"']").css({
                                "opacity" :0,
                                "visibility":"hidden"
                                 
                            });
                    },125);
               } 


                function resetGrid2(nc,nr,h,w,mc,mr){
                    for(var i=1;i<nc+1;i++){
                        for(var j=1;j<nr+1;j++){
                            var zc=(i-1)*(h+mc);
                            var zr=(j-1)*(w+mr);
                            $(".c[positionc='"+i+"'][positionr='"+j+"']").css({
                                "width":w+"px",
                                "height":h+"px",
                                "transform":"translate3d("+zr+"px, "+zc+"px, "+0+"px)",
                                "visibility":"visible",
                                "opacity":1,
                                "z-index":2,
                            });
                        }
                    }
                   
               } 

                





               $(".c").on("click",cc);

               $(".b3").on("click",function(){
                     $(".b2").css({
                        "visibility":"hidden",
                        "opacity":0
                    });
                    resetGrid2(3,4,190,210,15,20);
                    $(".c").on("click",cc);

               });

               


               function cc(){
                    var c=$(this).attr("positionc");
                    var r=$(this).attr("positionr");
                    creatGrid2(c,r,3,4,190,210,15,20);
                    $(".c").off("click");
                    
                    setTimeout(function () {
                     $(".b2").css({
                        "visibility":"visible",
                        "opacity":1
                    });
                    },500);
                    
               }



               resetGrid2(3,4,190,210,15,20);
               

















            });
        </script>
    </body>
    </html>