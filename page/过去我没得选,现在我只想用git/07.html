<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
            <title>
                7。部分函数优化，加入缓速滚动，函数封装，禁止快速点击等
            </title>
            <link href="css/normalize.css" rel="stylesheet" type="text/css"/>
            <style type="text/css">
                html,body{
                    height:100%; 
                    margin:0;
                    overflow: hidden;
                }
                .a{
                    height:100%;
                    width: 100%;
                    overflow: hidden;
                }
                .b{
                    height:95%;
                    width: 800%;
                    transform: translate3d(-12.5%, 0px, 0px);
                    transition: transform 500ms ease-in-out;
                    


                }
                .c1{
                    margin-left: 12.5%;
                }
                .c{
                    height:100%;
                    width: 12.5%;
                    float: left;
                    transform: translate3d(0px, 0px, 0px);
                    transition: transform 500ms ease-in-out;
                }
                .d{
                    right: 0;
                    bottom: 0;
                    height:5%;
                    width: 92%;
                    background-image: linear-gradient(to left, rgba(255, 255, 255, 0) 0%, #000000 100%);
                    position: fixed;
                    z-index: 1;
                }
                .e{
                    top: 0;
                    left: 0;
                    height:95%;
                    width: 8%;
                    position: fixed;
                    float: left;
                    z-index: 1;
                    cursor: pointer;
                    opacity: 0;
                    transition: 500ms;
                    background-image: linear-gradient(to left, rgba(255, 255, 255, 0) 0%, #ffffff 100%);
                    
                }
                .f{
                    top: 0;
                    right: 0;
                    height:95%;
                    width: 8%;
                    position: fixed;
                    float: right;
                    z-index: 1;
                    cursor: pointer;
                    opacity: 0;
                    transition: 500ms;
                    background-image: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, #ffffff 100%);

                }
                .e:hover {
                    opacity: 0.3;
                }
                .f:hover {
                    opacity: 0.3;
                }
                .g{
                    bottom: 0;
                    left: 0;
                    height: 5%;
                    width: 8%;
                    position: fixed;
                    font-size: 2em;
                    font-weight: 800;
                    text-align: left;
                    color: #000000;
                    z-index: 2;
                    background: #999999;;
                    

                }
                
                .h{
                    background:#000000;
                    margin-left: 8%;
                    margin-right: 8%; 
                    height:100%;
                    width: 84%;
                    opacity:0.6;

                }
                .i{
                    width: 100%;
                    height: 95%;
                    position: absolute;
                    z-index: -1;
                    background: url("img/b.jpg") no-repeat center center;
                    background-size: cover;

                }
                .j1{
                    background: url("https://s3-us-west-2.amazonaws.com/s.cdpn.io/537051/city--1-min-min.jpg") center center no-repeat;
                    
                }
                .j2{
                    background: url("https://s3-us-west-2.amazonaws.com/s.cdpn.io/537051/city--2-min-min.jpg") center center no-repeat;
                    
                }
                .j3{
                    background: url("https://s3-us-west-2.amazonaws.com/s.cdpn.io/537051/city--3-min-min.jpg") center center no-repeat;
                    
                }
                .j4{
                    background: url("https://s3-us-west-2.amazonaws.com/s.cdpn.io/537051/city--4-min-min.jpg") center center no-repeat; 
                    
                }
                .j5{
                    background: url("https://s3-us-west-2.amazonaws.com/s.cdpn.io/537051/city--5-min-min.jpg") center center no-repeat;
                    
                }
                .j6{
                    background: url("img/a.jpg") center center no-repeat;

  
                    
                }
                .j{
                    height:100%;
                    width: 100%;
                    background-size: cover;
                    background-position: 0px center, 0px center;
                    position: relative;
                    z-index: -2;
                    
                }

                .k{
                    position: absolute;
                    height:100%;
                    width: 100%;
                    background: #000000;
                    z-index: -1;
                    opacity:0.8;
                }
                .l{
                    width: 100%;
                    height: 100%;
                    padding-left: 8%;
                    -webkit-text-fill-color: transparent !important;
                    -webkit-background-clip: text !important;
                    font-size: 30em;
                    font-weight: 800;
                    background-size: cover;
                    background-position: 0px center, 0px center;
                    transition: 500ms;
                    opacity:1;

                }
                .m{
                    height: 100%;
                    float: right;
                    border-right: 1%;
                    border-left: 1%;
                    opacity:1;
                    font-size: 2em;
                    font-weight: 800;
                    text-align: left;
                    transition: 500ms ease-in-out;

                }
                .m:hover{
                    -webkit-filter:brightness(0.5);
                }
                .m1{
                    width: 3%;
                    background: #000000;
                    color: #ffffff;
                }
                .m2{
                    width: 3%;
                    background: #333333;
                    color: #cccccc;                
                }
                .m3{
                    width: 3%;
                    background: #666666;
                    color: #999999;
                }
                .m4{
                    width: 3%;
                    background: #999999;
                    color: #666666;
                }
                .m5{
                    width: 3%;
                    background: #cccccc;
                    color: #333333;
                }
                .m6{
                    width: 30%;
                    background: #ffffff;
                    color: #000000;
                }

                
            </style>
        </meta>
    </head>
    <body>
        <div class="a">
            <div class="i">
            </div>
            <div class="b">
                <div class="c c1">
                    <div class="j j1">
                        <div class="k">
                        </div>
                        <div class="l j1 ">
                            A
                        </div>
                    </div>
                    <div class="h">
                    </div>
                </div>
                <div class="c">
                    <div class="j j2">
                        <div class="k">
                        </div>
                        <div class="l j2">
                            热
                        </div>
                    </div>
                    <div class="h">
                    </div>
                </div>
                <div class="c">
                    <div class="j j3">
                        <div class="k">
                        </div>
                        <div class="l j3">
                            C
                        </div>
                    </div>
                    <div class="h">
                    </div>
                </div>
                <div class="c">
                    <div class="j j4">
                        <div class="k">
                        </div>
                        <div class="l j4">
                            D
                        </div>
                    </div>
                    <div class="h">
                    </div>
                </div>
                <div class="c">
                    <div class="j j5">
                        <div class="k">
                        </div>
                        <div class="l j5">
                            E
                        </div>
                    </div>
                    <div class="h">
                    </div>
                </div>
                <div class="c">
                    <div class="j j6">
                        <div class="k">
                        </div>
                        <div class="l j6">
                            F
                        </div>
                    </div>
                    <div class="h">
                    </div>
                </div>
            </div>
            <div class="d">
                
                <div class="m m1">
                    F
                </div>
                <div class="m m2">
                    E
                </div>
                <div class="m m3">
                    D
                </div>
                <div class="m m4">
                    C
                </div>
                <div class="m m5">
                    B
                </div>
                <div class="m m6">
                    A
                </div>
            </div>
            <div class="e">
            </div>
            <div class="f">
            </div>
            <div class="g">
                未知
            </div>
        </div>
        <script src="js/jquery-2.1.1.min.js">
        </script>
        <script type="text/javascript">
            $(function(){
                var pn=1;





                function bgMove(e){
                    var RX=$(window).width()/2;
                    var RY=$(window).height()/2;
                    var CX=e.pageX;
                    var CY=e.pageY;
                    $('.i').css({
                        "transform": "translate3d("+(CX-RX)/30+"px,"+(CY-RY)/30+"px, 0) scale(1.2,1.2)"
                     });
                    
                }

                function turnLeftStop(){

                    $(".e").css({
                        "width":16 +"% "
                    });
                    $(".l").css({
                        "opacity":0
                    });
                    setTimeout(function () {
                        $(".e").css({
                        "width":8 +"% "
                        });
                        $(".l").css({
                            "opacity":1
                        });
                    },500)



                }

                function turnRightStop(){

                    $(".f").css({
                        "width":16 +"% "
                    });
                    $(".l").css({
                        "opacity":0
                    });
                    setTimeout(function () {
                        $(".f").css({
                        "width":8 +"% "
                        });
                        $(".l").css({
                            "opacity":1
                        });
                    },500)



                }


                function turnToWhichNav(which){

                    $(".m").css({
                        "width":3 +"% "
                        
                    });
                    $(".m"+which).css({
                        "width":30 +"% "
                        
                    });



                }

                 function turnToWhichPage(which){

                    $(".b").css({
                    "transform": "translate3d(-" + which * 12.5 + "%, 0, 0)"
                    });


                 }

                 function titleTroggle(){

                    $(".l").css({
                    "opacity":0
                 });
                    setTimeout(function () {
                        $(".l").css({
                    "opacity":1
                 });
                    },500);

                 }

                 function coverUp(){
                    $(".c").css({
                    "transform": "translate3d(0, -100%, 0)"
                        });
                    $(".l").css({
                    "opacity":0
                        });
                    setTimeout(function () {
                        $(".l").css({
                    "opacity":1
                 });
                    },500)
                }
            
                function coverDown(){
                    $(".c").css({
                    "transform": "translate3d(0, 0, 0)"
                        });
                    $(".l").css({
                    "opacity":0
                        });
                    setTimeout(function () {
                        $(".l").css({
                    "opacity":1
                 });
                    },500)
                }

                



                function turnLeft(){
                    if(pn==1){
                        turnLeftStop();
                        return;
                    }
                    pn--;
                    turnToWhichNav(7-pn);
                    turnToWhichPage(pn);
                    titleTroggle();
                }


                function turnRight(){
                    if(pn==6){
                        turnRightStop();
                        return;
                    }
                    pn++;
                    turnToWhichNav(7-pn);
                    turnToWhichPage(pn);
                    titleTroggle();
                }

                
                function turnTo(){
                    turnToWhichPage((6-$(this).index()));
                    turnToWhichNav($(this).index()+1);
                    pn=6-$(this).index();


                    $('.m').off('click');

                    setTimeout(function () {

                        $('.m').on('click', turnTo);
           
                    },1000);


                }

                function turnScroll(e){
                    var delta = e.originalEvent.wheelDelta;
                    if (delta > 0 || e.originalEvent.detail < 0) turnLeft();
                    if (delta < -0 || e.originalEvent.detail > 0) turnRight();

                    $(".d").off('mousewheel ');

                    $(".e").off('mousewheel ');

                    $(".f").off('mousewheel ');

                    setTimeout(function () {
                        
                        $(".d").on('mousewheel ', turnScroll);

                        $(".e").on('mousewheel ', turnScroll);

                        $(".f").on('mousewheel ', turnScroll);



                 
                    },1000);
                }

                function turnLeftCrol(){

                    turnLeft();

                    $(".e").off('click');

                     setTimeout(function () {

                        $(".e").on('click', turnLeftCrol);
           
                    },1000);

                }

                function turnRightCrol(){
                    
                    turnRight();

                    $(".f").off('click');

                     setTimeout(function () {

                        $(".f").on('click', turnRightCrol);
           
                    },1000);
                }

                
                

                $(window).on('mousemove',bgMove);

                $(".e").on('click', turnLeftCrol);

                $(".f").on('click', turnRightCrol);

                $(".d").on('mousewheel ', turnScroll);

                $(".e").on('mousewheel ', turnScroll);

                $(".f").on('mousewheel ', turnScroll);

                $(".j").on('mouseover', coverUp);

                $(".h").on('mouseout', coverDown);

                $('.m').on('click', turnTo);
            });
        </script>
    </body>
</html>
